# Panda 机器人多物体抓取与放置仿真

## 1. 项目简介

该项目演示了如何使用 MoveIt! 控制 Panda 机械臂在仿真环境中执行复杂的多物体抓取和放置任务。机械臂会从地面上抓取四个小物块，并将它们逐一放置到旁边的桌子上。当前实现仅在 RViz 中执行运动规划，Gazebo 里的夹爪尚未真正抓取物体。

## 2. 功能特点

- **动态场景创建**: 自动在 Rviz 中添加地面、桌子和待抓取的物块。
- **鲁棒的抓取策略**:
    - 为每个物块生成多种抓取姿态（包括垂直和侧面抓取），提高抓取成功率。
    - 实施了抓取失败后的回退策略：如果初次抓取失败，机械臂会先移动到一个安全位置，然后再次尝试抓取。
- **优化的运动规划**:
    - 调整了 MoveIt! 的规划参数（如规划时间、尝试次数、速度和加速度），以适应复杂的任务需求。
    - 使用 RRTConnect 规划器，适用于有较多障碍物的场景。
- **完整的任务流程**: 实现了从场景设置、逐个物体抓取、放置到任务完成后的复位的完整自动化流程。

## 3. 环境要求

- ROS (Robot Operating System)
- MoveIt!
- `panda_moveit_config` 包

## 4. 运行指南

请按照以下步骤在两个独立的终端中运行仿真和控制脚本。

### 4.1. 终端 A：启动仿真环境

使用本包提供的 `spawn_blocks.launch` 文件来启动 Gazebo 世界、加载机器人并启动 MoveIt!，同时在 RViz 中进行可视化。

```bash
roslaunch robot_arm spawn_blocks.launch
```

### 4.2. 终端 B：运行抓取和放置脚本

在另一个终端中，运行抓取和放置的主程序脚本。该脚本将控制机械臂完成所有任务。

```bash
rosrun robot_arm pick.py
```

> 提示：`joint_trajectory_cache` 目录中预存了一些常用的关节位置，可用于加速脚本初始化。
